## Emissions Levels and Life Satisfaction
### A Study on the German States

```{r, include = FALSE}

library(DataCombine)
library(WDI)
library(survival)
library(ggplot2)
library(Hmisc)

library(knitr)
library(googleVis)
library(Zelig)
source("Data/AnalysisSource.R")


library(repmis)

possibles <- c('~/GitHub/Climate-Happiness/', 
               '~/Documents/Hertie 2016/Collaborative Social Science Data/Research Project/GitHub/Climate-Happiness/')
set_valid_wd(possibles)

attach(data2)

```

```{r echo=FALSE, results='hide', message=FALSE}
#create aggregate dataframe to create plots for GoogleVis
#changing state names to correspond to GoogleVis provinces codes (Germany)

suppressPackageStartupMessages(library(googleVis))

#aggregate yearly emissions data by state
agg <- aggregate(cbind(CO2perSqKm) ~ State + Year, FUN=mean, data=data2)

allvar <- aggregate(cbind(CO2perSqKm, satis, environ, GrossIncome) ~ State + Year + Stateid, FUN=mean, data=data2)

#Transform yearly data to numeric
transform(agg, Year = as.numeric(Year))

#Replace problematic state names
Replace1 <- data.frame(from = c("Baden-W\xcc_rttemberg", "Th\xcc_ringen"), to = c("Baden-Wuerttemberg", "Thueringen"))
                       
allvar <- FindReplace(data=allvar, Var = "Stateid", replaceData = Replace1, from = "from", to = "to",
  exact = TRUE, vector = FALSE)

allvar <- FindReplace(data=allvar, Var = "State", replaceData = Replace1, from = "from", to = "to",
  exact = TRUE, vector = FALSE)

#create new vector with state codes

Replaces <- data.frame(from = c("Baden-Wuerttemberg", "Bayern", "Bremen", "Berlin", "Brandenburg", "Hamburg" , "Hessen", "Mecklenburg-Vorpommern", "Niedersachsen", "Nordrhein-Westfalen", "Rheinland-Pfalz", "Sachsen", "Sachsen-Anhalt", "Schleswig-Holstein", "Saarland", "Thueringen"), to = c("DE-BW", "DE-BY", "DE-HB", "DE-BE", "DE-BB", "DE-HH", "DE-HE", "DE-MV", "DE-NI", "DE-NW", "DE-RP", "DE-SN", "DE-ST", "DE-SH", "DE-SL", "DE-TH"))

New <- FindReplace(data=allvar, Var = "Stateid", replaceData = Replaces, from = "from", to = "to",
  exact = TRUE, vector = FALSE)

New[, c(2,4)] <- sapply(New[, c(2,4)], as.numeric)

#2012 only

year2010 <- New[ which(New$Year=='2010'),]

## Create Geo Charts option code for geovis plot

geoChartDE <- list(region="DE", 
                   resolution="provinces",
                   legend="{numberFormat:'#,###.00'}") 
```

### Introduction 

Climate change is undoubtedly a global problem, but this fact means it is also a classic tragedy of the commons. No country wants to put itself at an economic disadvantage by restricting the use of cheap fossil fuels so all continue to emit, deteriorating the "commons" of the Earth's protective atmosphere. This can make it difficult to get citizens to identify with the problem and take responsibility; people will more likely act when something affects them individually. On the other hand, some also argue that "green growth," i.e. economic growth with strict environmental regulations, has positive effects both economically and on individual weel-being. In this paper we want to explore these arguments: in an environmentally-conscious country like Germany, how much do people feel, consciously or unconsciously, the effects of green house gas emissions? More specifically, do emissions affect their reported well-being or life satisfaction?  

<img src="Emissions.jpg"/> 

### Our Research

Germany is a leader in protecting the environment while also having a long history as an industrial power and coal producer. On one hand, its energy transition (*Energiewende*) is considered one of the most ambitious climate policy projects in the world. On the other hand, it has struggled with appropriate incentives, a drop in oil prices and how to transform the transportation sector, not to mention coal's continued role as a cheap and reliable fuel. Germany therefore still does emit large amounts of green house gases. We will look at greenhouse gas emissions data by federal state (*Bundesland*) and compare that with life satisfaction data to examine our first hypothesis:

> *H1: Bundeslaender with higher emissions will have lower reported levels of  life satisfaction.* 

On the other hand, it may not be the emissions themselves that affect people's life satisfaction. People who are more concerned about the environment would be more concerned with emissions and may feel less satisfied with life than those who are less concerned about the environment. Therefore our second hypothesis is: 

> *H2: Reported individual concerns with the environment are, likewise, negatively reflected in the life satisfaction.* 

The map below illustrates the amount CO2e emissions (tons) per square kilometer of each state in Germany. The information is based on 2010 data from Laenderarbeitskreis. There is a wide range in the level emissions per square kilometer between the states, particularly in city-states and industrial states such as Berlin, Hamburg and Bremen.

```{r, echo=FALSE, results='asis'}

# Plot map of german emissions

Map <- gvisGeoChart(year2010, locationvar = 'Stateid',
                      colorvar = 'CO2perSqKm',
                      options = geoChartDE)

plot(Map, tag = 'chart')

```

<br>

Controlling for state- and time-fixed effects, we anticipate the following effects as a result of our model:

- CO2 Emissions Per Capita (-)
- CO2 Emissions Per Square KM (-)
- Concern About the Environment (-)
- Age (-)
- Monthly Income/Employment (+)
- Having a partner (+)
- Gender (no diff.)



### Data

For the purpose of our research, the following data has been collected:

- The **individual-level data** on individual characteristics and survey data is provided by:
    + The German Socio-Economic Panel Data ([GSOEP]( https://paneldata.org/)), conducted by the German Institute for Economic Research (DIW) 
   
   <br>
   
- The **state-level data** on emissions levels, state size, and population is gathered from four web-based sources:
     + [Statista.com]( http://de.statista.com/statistik/daten/studie/258063/umfrage/kohlendioxid-emissionen-je-einwohner-in-nordrhein-westfalen/) 
    + Environmental-Economic Accounting of the Bundeslaender [UGRdL](http://www.ugrdl.de/tab34.htm)  
    + Agency for Renewable Agency of North Rhine-Westphalia [AfEE](http://www.foederal-erneuerbar.de/landesinfo/bundesland/NRW/kategorie/wirtschaft/ordnung/2010) 
    + [Federal Statistical Office and Statistical Offices of the Bundeslaender](http://www.statistik-portal.de/Statistik-Portal/en/en_jb01_jahrtab1.asp) 
    + [Laenderarbeitskreis](http://www.lak-energiebilanzen.de/dseiten/co2BilanzenAktuelleErgebnisse.cfm)


```{r echo=FALSE, results='hide', message=FALSE}
# Plot map of 

## Get data from from the World Bank for country codes

wbData <- WDI(country="all", indicator=c("SP.DYN.LE00.IN",
                               "SP.POP.TOTL"), start=1960, end=2011,
              extra=FALSE)

names(wbData) <- c("country", "iso2c", "year", "life.expectancy",
                   "population")

worlddata <- read.csv("CO2_Data.csv")
attach(worlddata)

## Get country mappings from World Bank
getWorldBankCountries <- function(){
  wbCountries <-
    fromJSON("http://api.worldbank.org/countries?per_page=12000&format=json") 

  wbCountries <- data.frame(t(sapply(wbCountries[[2]], unlist)))
  wbCountries$longitude <- as.numeric(wbCountries$longitude)
  wbCountries$latitude <- as.numeric(wbCountries$latitude)
  levels(wbCountries$region.value) <- gsub(" \\(all income levels\\)",
                                           "", levels(wbCountries$region.value))
  return(wbCountries)
}

## Get country mappings
wbCountries <- getWorldBankCountries()

total <- merge(wbCountries, worlddata, 
                by.x="name", by.y="Country")

names(total) <- c("country", "id", "iso2Code", "RegionID", "RegionValue", "ID2", "Region", "Income.Level.ID", "IncomeLevel", "LendingType", "LendingValue", "Capital", "Longitude", "Latitude", "CO2EmissionsMt", "NotA", "ChangeSince1990", "NotB", "CO2perCapita", "NotC", "CO2perSquareKM", "NotD")

#set geochart options
geoChartworld <- list(region="world", 
                   resolution="countries",
                   legend="{numberFormat:'#,###.00'}")

#plot world emissions
WorldMap <- gvisGeoChart(total, locationvar = 'iso2Code',
                      colorvar = 'CO2perSquareKM',
                      options = geoChartworld)
```

### Global Emissions per Square Kilometer
The map below illustrates the amount CO2e emissions (tons) per square kilometer globally. The information is based on 2007 Data from the United Nations Department of Economic and Social Affairs. Compared to the values of countries, both in the same geographic area, and globally, Germany has extremely high levels of emissions per square kilometer. 


```{r, echo=FALSE, fig.align = 'center', results='asis'}
plot(WorldMap, tag = 'chart')

```

<br><br>

### Comparing Effects of Variables on Life Satisfaction by State

The dynamic chart below allows an examination of the correlation between the variables of interest and overall life satisfaction. The highlights the changes for each of the German states between the years 1990-2012. Scroll through the years at the bottom to see the changes in values over time for each state.

```{r, echo=FALSE, fig.align = 'center', fig.cap="Effects of Variables on Satisfation Across States and Time", results='asis'}
M1 <- gvisMotionChart(allvar, idvar="State", timevar="Year")
plot(M1, tag = 'chart')

```

<br><br>


### What Determines Overall Satisfaction?
Using the means of each state, the scatterplots below shows the correlation between our variables of interest and overall happiness levels. 

<br>

#### Correlation of Age and Life Satisfaction

Age seems to be very slightly positively correlated, though the majority of observations in the middle show a fairly flat trend.

```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}

# Find some helpful averages
individMeans <- aggregate(data2[, c("GrossIncome", "age", "fam", "emp")], by = list(Year), FUN = mean)
names(individMeans) <- c("Year", "MeanIncome", "MeanAge", "AveFam","AveEmp")

# Set as percentage
individMeans$AveFam <- (individMeans$AveFam-1)*100
aggremeans <- aggregate(data2[, c("WorkHours","GrossIncome","satis","environ","age",
                                 "emp","fam","CO2perSqKm","Emissions")], list(State, Year), mean)

#Boxplot of emissions levels by state

ggplot(data = aggremeans, aes(x=age, y=satis)) + geom_point() +geom_smooth(fill="#58D68D", colour="#2ca25f") + labs(x = "Age", y = "") + theme_bw()

```

<br>

#### Correlation of Gross Monthly Income and Life Satisfaction

Gross monthly income shows a more pronounced positive correlation, but flattens out the more income increases.

```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}

ggplot(data = aggremeans, aes(x=GrossIncome, y=satis)) + geom_point() +geom_smooth(fill="#58D68D", colour="#2ca25f") + labs(x = "Monthly Gross Income", y = "") + theme_bw()
```

<br>

#### Correlation of Emissions and Life Satisfaction

Comparing the state-level emissions data with life satisfaction, it seems that emissions, whether measured per capita or per square kilometer, both appear almost flat, though with an interesting peak in lower emissions per capita.  


```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}

ggplot(data = aggremeans, aes(x=Emissions, y=satis)) + geom_point() +geom_smooth(fill="#58D68D", colour="#2ca25f") + labs(x = "Emissions per Capita", y = "") + theme_bw()

```

<br>

```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}

ggplot(data = aggremeans, aes(x=CO2perSqKm, y=satis)) + geom_point() +geom_smooth(fill="#58D68D", colour="#2ca25f") + labs(x = "Emissions per sq km", y = "") + theme_bw()

```

<br>

#### Correlation of Concern for the Environment and Life Satisfaction

Life satisfaction appears to be negatively correlated with environmental concern, indicating that the more concerned a respondent is about environmental conditions, the lower the overall happiness of respondents, though the relationship is weak.

```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}

ggplot(data = aggremeans, aes(x=environ, y=satis)) + geom_point() +geom_smooth(fill="#58D68D", colour="#2ca25f") + labs(x = "Concern about the Environment", y = "") + theme_bw()
```

<br>

#### Overview of Emissions by State
In the per capita measure, Brandenburg, Saarland, Hamburg, and Nordrhein-Westfalen have the highest emissions, with Sachsen, Sachsen-Anhalt and Niedersachsen also showing higher emissions than the rest. 

```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}
boxplot(Emissions~State,
  data=data2,
  main="Emissions by State - per capita",
  xlab="State",
  ylab="Emissions (annual tons of CO2)",
  col="#2ca25f",
  border="#99d8c9"
)
```

<br>
When measured in square kilometers, the three city-states of Bremen, Berlin, and Hamburg are unsurprisingly the highest due to their small land area, not to mention relatively dense populations. Saarland is also geographically small, which means that Nordrhein-Westfalen is the only standout in this measure as a state with both a large land area and high emissions. 

```{r, echo=FALSE, fig.align='center', fig.width=8, fig.height=3}
boxplot(CO2perSqKm~State,
  data=data2,
  main="Emissions by State - per square kilometer",
  xlab="State",
  ylab="Emissions (annual tons of CO2)",
  col="#2ca25f",
  border="#99d8c9"
)
```


### Results

In our data, the potential negative impacts on happiness associated with various configurations of emission levels was nearly non-existent when we controlled for state-level and individual characteristics. We approached the problem of estimating the reduction in satisfaction by examining a number of regressions based on life-satisfaction that include a variety of socio-economic data to justify a person’s stated level of life satisfaction on a subjective 1-10 scale.


Variable       | Coefficient direction and strength   | Expected direction          
---------------|--------------------------------------|---------------
Total Emissions  | -       | -
Emissions per Capita   | - | -
Emissions per Sq. KM | - | -
Concern for the Environment | - | -
Age | - | -
Monthly Income | + | +
Employment | + | +
Having a partner | + | +
Gender (no diff.) | ~ | +


### Conclusions

Interestingly, emissions, whether per capita or by land area, does not appear to have a significant effect on reported life satisfaction in any of the models. The other, individual-level variables are statistically significant in all the models. For variables other than gender, the directions of the relationships are also the same across models: emissions and age have negative coefficients, while concern about the environment and energy use have positive coefficients.

The output of our multi-level modeling demonstrates that the State emissions are indeed negatively related to the individual happiness. However, after controlling for the individual environmental concerns, the coefficient (-0.005) is not statistically significant. Consequently, the group-level effect does not significantly differ from the individual-level. On the other hand, the coefficient of environmental concerns statistically differs from 0, but the direction is oddly positive counter the expectations. These results point at the omitted variables (absence of the demographic characteristics) that should be included in the further model. Similarly, the surprising direction of the environmental coefficient demands investigation of endogeneity between reported happiness and environmental concerns. 

In short, we find that for most invidual Germans, emissions do not seem to play a large role in determining their life satisfaction. While the results might be different in a place like China, where smog affects daily life big cities, in Germany we do not see a direct daily impact on their citizens in terms of their emissions. 

<br><br><br>

### Sources

Brereton, Finbarr, J Peter Clinch, and Susana Ferreira. 2008. “Happiness, Geography and the Environment.” *Ecological Economics* 65 (2). Elsevier: 386–96.

Cuñado, Juncal, and Fernando Pérez de Gracia. 2013. “Environment and Happiness: New Evidence for Spain.” *Social Indicators Research* 112 (3). Springer: 549–67.

Ferreira, Susana, and Mirko Moro. 2010. “On the Use of Subjective Well-Being Data for Environmental Valuation.” *Environmental and Resource Economics* 46 (3). Springer: 249–73.

Ferrer-i-Carbonell, Ada, and John M Gowdy. 2007. “Environmental Degradation and Happiness.” *Ecological Economics* 60 (3). Elsevier: 509–16.

Goetzke, Frank, and Tilmann Rave. 2015. “Regional Air Quality and Happiness in Germany.” *International Regional Science Review* 38 (4). SAGE Publications: 437–51.

Luechinger, Simon. 2009. “Valuing Air Quality Using the Life Satisfaction Approach*.” *The Economic 18 Journal* 119 (536). Wiley Online Library: 482–515.

MacKerron, George, and Susana Mourato. 2009. “Life Satisfaction and Air Quality in London.” *Ecological Economics* 68 (5). Elsevier: 1441–53.

Menz, Tobias, and Heinz Welsch. 2010. “Population Aging and Environmental Preferences in OECD
Countries: The Case of Air Pollution.” *Ecological Economics* 69 (12). Elsevier: 2582–9.

Rehdanz, Katrin, and David Maddison. 2008. “Local Environmental Quality and Life-Satisfaction in
Germany.” *Ecological Economics* 64 (4). Elsevier: 787–97.

Rivers, Douglas, and Quang H Vuong. 1988. “Limited Information Estimators and Exogeneity Tests for
Simultaneous Probit Models.” *Journal of Econometrics* 39 (3). Elsevier: 347–66.

Van Praag, Bernard, and Barbara E Baarsma. 2005. “Using Happiness Surveys to Value Intangibles: The
Case of Airport Noise*.” *The Economic Journal* 115 (500). Wiley Online Library: 224–46.

Welsch, Heinz. 2002. “Preferences over Prosperity and Pollution: Environmental Valuation Based on
Happiness Surveys.” *Kyklos* 55 (4). Wiley Online Library: 473–94.

———. 2006. “Environment and Happiness: Valuation of Air Pollution Using Life Satisfaction Data.” *Ecological Economics* 58 (4). Elsevier: 801–13.